<% @title="Past Problems" %>
<h1 class="text-center p-1">Past Problems</h1>

<div class="table-responsive-md">
	<table class="table table-striped table-hover">
		<thead>
			<tr class="text-center">
				<th scope="col" class="text-left">Problem</th>
				<th scope="col">Average Score</th>
				<th scope="col">Points</th>
				<th scope="col">Completed</th>
			</tr>
		</thead>

		<tbody>
			<% @problems.each do |problem| %>
				<% if problem.is_hidden == 0 %>
					<tr class="text-center">
						<th scope="row" class="text-left">
							<%= link_to problem.title, problem_path(problem), :class => "text-success" %>
						</th>
						<td scope="row">
							<%= problem.users_attempted != 0 ? problem.total_user_score*100/(problem.users_attempted*problem.score) : 0 %>%
						</td>
						<td scope="row">
							<%= problem.score %>
						</td>
						<td scope="row">
						<% if current_user %>
							<% if @lst[problem.title]["got_all_points"] == 1%>
								True
								<% else %>
								False
								<% end %>
						<% else %>
							False
						<% end %>
						</td>
					</tr>
				<% end %>
			<% end %>
		</tbody>
	</table>
</div>